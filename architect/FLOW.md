만약에# 앱 실행 흐름

## 개발 모드 실행

```bash
npm run tauri dev
```

```
┌─────────────────────────────────────────────────────────────┐
│ 1. Vite 개발 서버 시작                                       │
│    └── localhost:1420 에서 React 앱 서빙                     │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│ 2. Tauri가 Rust 앱 빌드                                      │
│    └── cargo run 실행                                        │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│ 3. 네이티브 창 생성                                          │
│    └── 200x200, 투명, 창틀 없음, 항상 위                      │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│ 4. WebView가 localhost:1420 로드                             │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│ 5. React 앱 마운트                                           │
│    └── main.tsx → App.tsx                                    │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│ 6. Phaser 게임 초기화                                        │
│    └── new Phaser.Game(config)                               │
│    └── PetScene 로드                                         │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│ 7. 펫 렌더링 완료!                                           │
│    └── 화면에 초록 펫 등장                                    │
└─────────────────────────────────────────────────────────────┘
```

## 코드 흐름

### React → Phaser 연결

```
src/main.tsx
    │
    └── ReactDOM.createRoot().render(<App />)
                │
                ↓
        src/App.tsx
            │
            └── useEffect(() => {
                    new Phaser.Game({
                        scene: [PetScene],  ←─────┐
                        ...                       │
                    })                            │
                })                                │
                                                  │
        src/game/PetScene.ts  ←───────────────────┘
            │
            └── create() {
                    this.drawPet()      // 펫 그리기
                    this.tweens.add()   // 애니메이션
                    // 이벤트 바인딩
                }
```

## 이벤트 흐름

### 마우스 호버

```
pointerover 이벤트
    ↓
drawPet(0x66bb6a)  // 밝은 초록색으로 다시 그리기
    ↓
pointerout 이벤트
    ↓
drawPet()  // 원래 색으로 복원
```

### 드래그

```
pointerdown on pet
    ↓
isDragging = true
dragStartX = pointer.x - pet.x
dragStartY = pointer.y - pet.y
    ↓
pointermove (전체 화면)
    ↓
if (isDragging) {
    pet.setPosition(pointer.x - dragStartX, pointer.y - dragStartY)
}
    ↓
pointerup
    ↓
isDragging = false
```

## 빌드 흐름

```bash
npm run tauri build
```

```
1. npm run build (Vite)
   └── TypeScript 컴파일
   └── 번들링 → dist/

2. Tauri 빌드
   └── Rust 컴파일 (release)
   └── dist/ 를 앱에 번들링
   └── .app (macOS) / .exe (Windows) / .deb (Linux) 생성
```
